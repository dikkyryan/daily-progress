# Alibaba Cloud RAM API examples using Python

## Summary
0. [Introduction](#introduction)
1. [Prerequisite](#prerequisite)
2. [How to use Python code snippets](#how-to-use-Python-code-snippets)

## Introduction
Currently there is no easy way to create RAM users in bulk instead it can only be done by leveraging RAM API's. But we don't have any examples and working code to showcase that and this python tool helps in leveraging RAM API's for the common use cases so that others can reuse the code to perform RAM operations in bulk for the new or existing customers.

### Use Cases
We have identified 3 common use cases.

* #### Creation of RAM users in bulk

    This is a common use case where in newly on boarded customers wants to create RAM users in bulk with proper permissions.

* #### Deletion of RAM users in bulk

    This is another common use case where in admin would like to clean up dormant users as per the audit requirements etc.

* #### Pull RAM users list

    This is a certain use case where in customer has quarterly security audit requirement and as part that they need to pull the list of all RAM users to find out the dormant users who are not active for the last 3 months to fecilitate the clean up activities as per the audit requirements.

## Prerequisite

1. Setup Environment

    Set up python environment on your local machine (mac).

    1. Install Python
        ```
        brew install python
        ```

    2. Install aliyun-python-sdk-ram
        ```
        python -m pip install aliyun-python-sdk-ram
        ```
        Please refer to the below url for more details.

        https://www.alibabacloud.com/help/doc-detail/28777.htm?spm=a2c63.l28256.b99.195.1db628fdFugKai

    3. Install beautifulSoup library for XML parsing.
        ```
        python -m pip install bs4
        ```

2. Prepare RAM user CSV Templates

    This particular RAM Python programs requires input in a certain format.

    1. RAM Users Creation csv Template

        Please use this template to pass in as input to python program for bulk user creation in RAM.

        * **Template name** : ram_user_creation_list.csv

        * **Template Type** : Input File

        * **Template Description** :

            ![](images/ram_users_creation_csv_template.png)

    2. RAM Users Deletion csv Template

        Please use this template to pass in as input to python program for bulk user Deletion in RAM.

        * **Template name** : ram_user_deletion_list.csv

        * **Template Type** : Input File

        * **Template Description** :

            ![](images/ram_users_deletion_csv_template.png)

    3. Pull RAM users csv Template

        This is the format of RAM users output file generated by the python program.

        * **Template name** : ram_user_list.csv

        * **Template Type** : Output File

## How to use Python code snippets

1. How to create RAM users in Bulk:

    1. Make sure you have python environment setup and templates ready as mentioned in Step3.

    2. Copy ram_users_bulk_creation.py & ram_user_creation_list.csv to a folder.

    3. Update the code file with your respective keys (AccessKey ID,Access Secret Key and Region ID) and save it.

        ![](images/keys_code_file.png)

    4. Execute python ram_users_bulk_creation.py

        ![](images/bulk_creation.png)

    5. Check your RAM screen in the alibaba cloud portal.

        ![](images/bulk_creation_console.png)

2. How to Delete RAM users in Bulk:

    1. Make sure you have python environment setup and templates ready as mentioned in Step3.

    2. Copy ram_users_bulk_deletion.py & ram_user_deletion_list.csv to a folder.

    3. Update the code file with your respective keys (AccessKey ID,Access Secret Key and Region ID) and save it.

        ![](images/keys_code_file.png)

    4. Execute python ram_users_bulk_deletion.py

        ![](images/bulk_deletion.png)

    5. Check your RAM screen in the alibaba cloud portal.

        ![](images/bulk_deletion_console.png)

3. How to pull RAM users list:

    1. Make sure you have python environment setup and templates ready as mentioned in Step3.

    2. Copy pull_ram_users_list.py to a folder.

    3. Update the code file with your respective keys (AccessKey ID,Access Secret Key and Region ID) and save it.

        ![](images/keys_code_file.png)

    4. Execute python pull_ram_users_list.py

        ![](images/pull_ram_users.png)

    5. Check the folder for the output file ram_users_list.csv

        ![](images/pull_ram_users_file.png)

        ![](images/pull_ram_users_content.png)
